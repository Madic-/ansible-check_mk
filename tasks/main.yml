---

- name: Including basic setup tasks
  import_tasks: install_01_basic.yml
  tags: check_mk, thruk, influxdb, grafana

- name: Including Check_MK tasks
  import_tasks: install_02_cmk.yml
  tags: check_mk

- name: Including Thruk installation tasks
  import_tasks: install_03_thruk.yml
  tags: thruk

- name: Including InfluxDB installation tasks
  import_tasks: install_04_influxdb.yml
  tags: influxdb

- name: Including Grafana installation tasks
  import_tasks: install_05_grafana.yml
  tags: grafana

- name: Including Histou installation tasks
  import_tasks: install_06_histou.yml
  tags: histou

- name: Including Nagflux installation tasks
  import_tasks: install_07_nagflux.yml
  tags: nagflux

- name: Flush handlers
  meta: flush_handlers
  tags: check_mk, thruk, grafana

- name: Informational Output
  debug:
    msg:
      - ""
      - "Check_MK URL: http://{{ inventory_hostname }}/{{ cmk_site_name }}/check_mk"
      - "Thruk URL: http://{{ inventory_hostname }}/thruk"
      - "Grafana URL: http://{{ inventory_hostname }}/grafana"
      - "Default user: {{ cmk_default_user }}"
      - "Default password: {{ cmk_default_password }}"
  tags: check_mk, thruk, grafana